'\" t
.\" Automatically generated by Pandoc 3.6.2
.\"
.TH "MSSH\-MENU" "1" "2025\-05\-23" "mssh\-menu 0.0.6" "User Commands"
.SH Name
mssh\-menu \- Use CSV file with tags to ssh into multiple devices
.SH Synopsis
\f[B]\f[CB]mssh\-menu\f[B]\f[R] [\f[B]\f[CB]\-h\f[B]\f[R]]
[\f[B]\f[CB]\-\-completion\f[B]\f[R]
{\f[B]\f[CB]bash,zsh,fish\f[B]\f[R]}] [\f[B]\f[CB]\-v\f[B]\f[R]]
[\f[B]\f[CB]\-n\f[B]\f[R] \f[I]\f[CI]number\f[I]\f[R]]
[\f[B]\f[CB]\-u\f[B]\f[R] \f[I]\f[CI]user\f[I]\f[R]]
[\f[B]\f[CB]\-c\f[B]\f[R] \f[I]\f[CI]columns\f[I]\f[R]]
[\f[B]\f[CB]\-m\f[B]\f[R]] [\f[I]\f[CI]FILENAME.CSV\f[I]\f[R]]
.SH Description
Input a CSV file that has a list of host and tags (multiple columns of
tags are OK).
This script will display to the user a list of groups by tag name and
prompt for a selection of one or more items.
The selection will launch multiple ssh connections all inside one
\f[CR]tmux\f[R] window with the keyboard synchronized.
\f[CR]ssh\f[R] and \f[CR]tmux\f[R] are required to be available on the
system path.
.SS Positional Arguments
.TP
\f[B]\f[BI]\f[CBI]FILENAME.CSV\f[BI]\f[B]\f[R]
name of CSV file (default=$HOME/servers.csv)
.SS Option Flags
.TP
\f[B]\f[CB]\-h\f[B]\f[R], \f[B]\f[CB]\-\-help\f[B]\f[R]
show this help message and exit
.TP
\f[B]\f[CB]\-v\f[B]\f[R], \f[B]\f[CB]\-\-version\f[B]\f[R]
show the version number and exit
.TP
\f[B]\f[CB]\-n\f[B]\f[R] \f[I]\f[CI]number\f[I]\f[R], \f[B]\f[CB]\-\-number\f[B]\f[R] \f[I]\f[CI]number\f[I]\f[R]
\f[B]Risky option\f[R] Enter selection number or numbers (separated by
commas and/or using a dash to specify a range) instead of showing the
menu.
.TP
\f[B]\f[CB]\-u\f[B]\f[R] \f[I]\f[CI]user\f[I]\f[R], \f[B]\f[CB]\-\-user\f[B]\f[R] \f[I]\f[CI]user\f[I]\f[R]
Enter a username instead of being prompted for one.
.TP
\f[B]\f[CB]\-c\f[B]\f[R] \f[I]\f[CI]columns\f[I]\f[R], \f[B]\f[CB]\-\-columns\f[B]\f[R] \f[I]\f[CI]columns\f[I]\f[R]
Override the autocalculation of menu columns.
Specify an maximum number of menu columns to display.
.TP
\f[B]\f[CB]\-m\f[B]\f[R], \f[B]\f[CB]\-\-menu\-only\f[B]\f[R]
Display the menu selection list and exit.
.SS Shell Completion Options
.TP
\f[B]\f[CB]\-\-completion\f[B]\f[R] {\f[B]\f[CB]bash,zsh,fish\f[B]\f[R]}
Print mssh\-menu shell completion to the terminal and exit
.SH Examples
.SS Sample \f[CR]servers.csv\f[R] file
The examples use the following tags list:
.PP
.TS
tab(@);
l l l l.
T{
host
T}@T{
tags
T}@T{
T}@T{
T}
_
T{
server1
T}@T{
Site 1
T}@T{
Primary
T}@T{
All
T}
T{
server2
T}@T{
Site 1
T}@T{
Redundant
T}@T{
All
T}
T{
server3
T}@T{
Site 2
T}@T{
Primary
T}@T{
All
T}
T{
server4
T}@T{
Site 2
T}@T{
Redundant
T}@T{
All
T}
.TE
.PP
Here is the data in CSV format.
Save this file as \f[CR]servers.csv\f[R].
You can edit it in a spreadsheet program like Microsoft Excel or
LibreOffice Calc.
You can also edit it using a simple text editing program like Notepad.
.IP
.EX
host,tags,,
server1,Site 1,Primary,All
server2,Site 1,Redundant,All
server3,Site 2,Primary,All
server4,Site 2,Redundant,All
.EE
.PP
Note: The SSH connections will be in the order of the items in the CSV
file.
.SS Example 1
Log into all the odd numbered servers.
.IP
.EX
$ mssh\-menu examples/servers.csv
.EE
.PP
A menu appears.
Select the option corresponding to \f[B]\[lq]2.
Primary\[rq]\f[R].
.PP
Enter a username.
The same username will be used on all servers.
.PP
The output should look like this:
.IP
.EX
1. All      
2. Primary  
3. Redundant
4. Site 1   
5. Site 2   
Info: Use commas to separate multiple entries and dash for ranges.
Select one or more numbers from the list [1\-5,q] (default=none): 2
Selected: \[ga]2. Primary\[ga]
server1
server3 

Enter username (default=none): admin
.EE
.PP
A window opens with two panes and an ssh connection is established to
both servers (admin\[at]server1 and admin\[at]server3).
.SS Example 2
Log into all the servers at Site 2.
.IP
.EX
$ mssh\-menu examples/servers.csv
.EE
.PP
A menu appears.
Select the option corresponding to \f[B]\[lq]5.
Site 2\[rq]\f[R].
.PP
Enter a username.
The same username will be used on all servers.
.IP
.EX
1. All      
2. Primary  
3. Redundant
4. Site 1   
5. Site 2   
Info: Use commas to separate multiple entries and dash for ranges.
Select one or more numbers from the list [1\-5,q] (default=none): 5
Selected: \[ga]5. Site 2\[ga]
server3
server4 

Enter username (default=none): admin
.EE
.PP
A window opens with two panes and an ssh connection is established to
both servers (admin\[at]server3 and admin\[at]server4).
.SS Example 3
Use the \f[CR]\-\-menu\-only\f[R] option and \f[CR]grep\f[R] to see
which menu options correspond to the \f[B]redundant\f[R] servers.
.IP
.EX
$ mssh\-menu examples/servers.csv \-\-menu\-only \-\-columns 1 | grep \-i redundant
.EE
.PP
The output should be:
.IP
.EX
3. Redundant
.EE
.SS Example 4
Use the menu number as an option to \f[CR]mssh\-menu\f[R] to ssh without
using the menu.
.PP
Using the output from example 3, enter the following command.
.IP
.EX
$ mssh\-menu examples/servers.csv \-\-user admin \-\-number 3
.EE
.PP
The menu is not displayed, and a window opens with two panes and an ssh
connection is established to both servers (admin\[at]server2 and
admin\[at]server4).
.SH AUTHORS
Todd Wintermute.
